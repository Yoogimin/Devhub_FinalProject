<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevHub ê²Œì‹œê¸€ ìƒì„¸ ë³´ê¸°</title>
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.svg">
    <link rel="stylesheet" href="/libs/remixicon/fonts/remixicon.css">
    <link rel="stylesheet" href="/libs/swiper/swiper-bundle.css">
    <link rel="stylesheet" href="/libs/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <link rel="stylesheet" href="/css/viewCss.css">
    <style>
        body {
            background: #1e1e1e;
            color: #000;
            font-family: 'Arial', sans-serif;
            font-weight: bold;
            overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
            background-image: url('/images/background/board bg.webp'); /* ë°°ê²½ ì´ë¯¸ì§€ ì¶”ê°€ */
            background-size: 120%; /* ë°°ê²½ ì´ë¯¸ì§€ê°€ ì „ì²´ë¥¼ ë®ë„ë¡ ì„¤ì • */
            background-repeat: no-repeat; /* ë°°ê²½ ì´ë¯¸ì§€ ë°˜ë³µ ë°©ì§€ */
        }

        .dropdown-menu {
            background-color: #343a40; /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë°°ê²½ìƒ‰ */
            color: #fff; /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í…ìŠ¤íŠ¸ ìƒ‰ */
            position: absolute; /* ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì • */
            top: 0; /* ìƒë‹¨ ì •ë ¬ */
            left: 100%; /* ë”ë³´ê¸° ì•„ì´ì½˜ ì˜¤ë¥¸ìª½ì— ìœ„ì¹˜ */
            z-index: 1000; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê²¨ì§ */
            min-width: 120px; /* ìµœì†Œ ë„ˆë¹„ */
            padding: 10px 0; /* ë‚´ìš©ê³¼ ëª¨ì„œë¦¬ ê°„ì˜ ì—¬ë°± */
        }

        .dropdown-menu.show {
            display: block; /* í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ê°€ ë‚˜íƒ€ë‚¨ */
        }


        .dropdown-item {
            color: #fff; /* ë“œë¡­ë‹¤ìš´ ì•„ì´í…œ í…ìŠ¤íŠ¸ ìƒ‰ */
        }

        .dropdown-item:hover {
            background-color: #495057; /* ë“œë¡­ë‹¤ìš´ ì•„ì´í…œ í˜¸ë²„ ë°°ê²½ìƒ‰ */
        }

        .point-box img {
            margin-right: 5px;
        }

        .navbar-brand .logo i {
            margin-right: 10px;
        }

        .center-div {
            position: relative;
            transition: transform 0.5s ease-in-out;
        }

        .move-left {
            transform: translateX(-30px); /* ì›í•˜ëŠ” ê±°ë¦¬ë¡œ ì¡°ì • */
        }

        .right-div, .left-div {
            position: absolute;
            top: 0;
            left: calc(100% + 20px); /* center-divì˜ ì˜¤ë¥¸ìª½ì— ìœ„ì¹˜í•˜ë„ë¡ ì„¤ì • */
            width: 550px;
            height: 90vh;
            background-color: rgba(255, 255, 255, 0.85);
            opacity: 0;
            transition: opacity 0.5s ease-in-out, left 0.5s ease-in-out;
            padding: 20px; /* ë‚´ìš©ê³¼ ëª¨ì„œë¦¬ ê°„ì˜ ì—¬ë°± */
            border-radius: 8px; /* ì™¸ê°ì„  ë‘¥ê¸€ê²Œ */
        }

        .show-right-div, .show-left-div{
            opacity: 1;
            left: calc(105% + 10px); /* ê°€ìš´ë°ë¡œ ì´ë™ */
        }

        .title-text{
            font-weight: bold;
            /*margin-bottom: 10px;*/
        }

        .grid-vd {
            display: flex;
            font-size: 14px;
            gap: 5px; /* ìš”ì†Œë“¤ ì‚¬ì´ì˜ ê°„ê²© */
            border-bottom: 1px solid black; /* ì•„ë˜ìª½ ê²½ê³„ì„  */
            padding: 10px 0; /* ìƒí•˜ ì—¬ë°± */
            position: relative; /* ë¶€ëª¨ ìš”ì†Œë¥¼ relativeë¡œ ì„¤ì • */
        }

        .menu-vd{
            position: absolute;
            right: 10px; /* ì˜¤ë¥¸ìª½ì— ê³ ì • */
            bottom: 5px;
        }

        .view-vd {
            position: relative;
            background-color: rgba(255, 255, 255, 0.85);
            width: 600px;
            height: 90vh;
            padding: 20px; /* ë‚´ìš©ê³¼ ëª¨ì„œë¦¬ ê°„ì˜ ì—¬ë°± */
            border-radius: 8px; /* ì™¸ê°ì„  ë‘¥ê¸€ê²Œ */
        }

        .comment-vd {
            position: absolute;
            bottom: 60px; /* ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì¡°ì • */
            left: 50%; /* ê°€ìš´ë° ì •ë ¬ */
            transform: translateX(-50%); /* ê°€ìš´ë° ì •ë ¬ */
            display: flex;
            justify-content: center; /* ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
            align-items: center; /* ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
            border: 1px solid black;
            width: 200px;
        }


        .comment-vd span {
            margin-bottom: 15px; /* ê° ì•„ì´ì½˜ ì‚¬ì´ì˜ ê°„ê²© ì¡°ì • */
            margin-right: 8px; /* ì•„ì´ï¿½ï¿½ï¿½ ì‚¬ì´ì˜ ê°„ê²© */
        }

        .btn-comment{
            font-size: 14px; font-weight: bold; line-height: 1; color: #41464b;
        }

        .swiper-container {
            width: 200px;
            height: 500px; /* ì´ë¯¸ì§€ ë†’ì´ ì„¤ì • */
        }
        .swiper-slide {
            opacity: 0; /* ì´ˆê¸°ì— ëª¨ë“  ìŠ¬ë¼ì´ë“œë¥¼ ìˆ¨ê¹€ */
            transition: opacity 2s ease; /* ì„œì„œíˆ ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì • */
        }
        .swiper-slide img {
            width: 200px; /* ì´ë¯¸ì§€ ë„ˆë¹„ 100% ì„¤ì • */
            height: 100%; /* ì´ë¯¸ì§€ ë†’ì´ 100% ì„¤ì • */
            object-fit: cover; /* ì´ë¯¸ì§€ê°€ ì»¨í…Œì´ë„ˆì— ë§ê²Œ ì¡°ì •ë˜ë„ë¡ ì„¤ì • */
        }

        .comment-text{
            color: black;
        }

        .btn-cd {
            color: #FF8224;
            text-decoration: none;
            font-size: 25px;
            border: none;
            background: none;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
        }

        .btn-cd::before {
            margin-left: auto;
        }

        .btn-cd::after, .btn-cd::before {
            content: '';
            width: 0%;
            height: 2px;
            background: linear-gradient(-45deg, #e81cff 0%, #40c9ff 100% );
            display: block;
            transition: 0.5s;
        }

        .btn-cd:hover::after, .btn-cd:hover::before {
            width: 100%;
        }
    </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#navbarCollapse">

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” ì‹œì‘ -->
<th:block th:replace="~{body/header :: header}"></th:block>
<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” ë -->

<section style="margin-top: 120px; margin-bottom: 50px;">
    <div class="container center-div" style="display: flex">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="/images/ai-1.jpg" alt="Slide 1">
                </div>
                <div class="swiper-slide">
                    <img src="/images/ai-2.jpg" alt="Slide 2">
                </div>
                <div class="swiper-slide">
                    <img src="/images/ai-3.jpg" alt="Slide 3">
                </div>
                <div class="swiper-slide">
                    <img src="/images/ai-4.jpg" alt="Slide 4">
                </div>
                <div class="swiper-slide">
                    <img src="/images/ai-5.jpg" alt="Slide 5">
                </div>
                <div class="swiper-slide">
                    <img src="/images/ai-6.jpg" alt="Slide 6">
                </div>
            </div>
        </div>

        <div>
            <br/>
            <!-- ê´‘ê³  ë„£ê¸° ìŒ‰ê°€ëŠ¥ -->
        </div>
        <div style="position: relative; margin-left: 35px;">
            <div class="view-vd center-div">
                <div id="modiForm">
                    <h2 class="title-text">[[${view.BTitle}]]</h2>
                    <div class="grid-vd">
                        ì‘ì„±ì : [[${view.BWriter}]] |
                        ì¡°íšŒìˆ˜ : [[${view.BHit}]] |
                        ì‘ì„±ì¼ :
                        <div class="menu-vd">
                            <a type="button" id="viewDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 30" width="15" height="30">
                                    <circle cx="5" cy="5" r="3" fill="black" />
                                    <circle cx="5" cy="15" r="3" fill="black" />
                                    <circle cx="5" cy="25" r="3" fill="black" />
                                </svg>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="viewDropdown">
                                <li><button class="dropdown-item" id="center-div">ê²Œì‹œê¸€</button></li>
                                <li th:if="${not #lists.isEmpty(code)}"><button class="dropdown-item" id="right-div">ì½”ë“œë³´ê¸°</button></li>
                                <li th:if="${session.loginId eq view.BWriter || session.loginId eq 'admin'}"><a class="dropdown-item" th:href="@{/modifyForm/{BNum}(BNum=${view.BNum})}">ê²Œì‹œê¸€ ìˆ˜ì •</a></li>
                                <li th:if="${session.loginId eq view.BWriter || session.loginId eq 'admin'}"><a class="dropdown-item" th:href="@{/bDelete/{BNum}(BNum=${view.BNum})}">ê²Œì‹œê¸€ ì‚­ì œ</a></li>
                            </ul>
                        </div>
                    </div>
                    <div style="border-bottom: black"></div>
                    <div>
                        <br/>
                        <img th:src="@{|/upload/${view.BFileName}|}" width="300px"><br/><br/>
                        [[${view.BContent}]]
                    </div>

                    <div class="comment-vd">
                        <!-- ì¶”ì²œ ì•„ì´ì½˜ -->
                        <span>
                            <label class="container-like">
                              <input type="checkbox">
                              <svg class="svg-like" id="Glyph" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M29.845,17.099l-2.489,8.725C26.989,27.105,25.804,28,24.473,28H11c-0.553,0-1-0.448-1-1V13  c0-0.215,0.069-0.425,0.198-0.597l5.392-7.24C16.188,4.414,17.05,4,17.974,4C19.643,4,21,5.357,21,7.026V12h5.002  c1.265,0,2.427,0.579,3.188,1.589C29.954,14.601,30.192,15.88,29.845,17.099z" id="XMLID_254_"></path><path d="M7,12H3c-0.553,0-1,0.448-1,1v14c0,0.552,0.447,1,1,1h4c0.553,0,1-0.448,1-1V13C8,12.448,7.553,12,7,12z   M5,25.5c-0.828,0-1.5-0.672-1.5-1.5c0-0.828,0.672-1.5,1.5-1.5c0.828,0,1.5,0.672,1.5,1.5C6.5,24.828,5.828,25.5,5,25.5z" id="XMLID_256_"></path></svg>
                            </label>
                            ì¶”ì²œ
                        </span>

                        <!-- ëŒ“ê¸€ ì•„ì´ì½˜ -->
                        <span style="margin: 0">
                            <a data-bs-toggle="modal" data-bs-target="#OpneCommentModal" id="commentView">
                                <ul class="ul-come" style="display: flex; flex-direction: column; justify-content: center; font-size: 16px; text-align: center; margin-bottom: 10px; margin-left: 10px; margin-right: 10px; margin-top: 5px;">
                                  <li style="margin-bottom: 5px;">
                                    <span class="icon-come" style="margin: 0; font-size: 38px; text-align: center;">ğŸ’¬</span>
                                  </li>
                                    ëŒ“ê¸€
                                </ul>
                            </a>
                        </span>
                        <!-- ë¶ë§ˆí¬ ì•„ì´ì½˜ -->
                        <span style="display: flex; flex-direction: column; justify-content: center;">
                            <div class="bookmark-checkbox" style=" margin-top: 10px;">
                              <input
                                      type="checkbox"
                                      id="bookmark-toggle"
                                      class="bookmark-checkbox__input"
                              />
                              <label for="bookmark-toggle" class="bookmark-checkbox__label">
                                <svg class="bookmark-checkbox__icon" viewBox="0 0 24 24">
                                  <path
                                          class="bookmark-checkbox__icon-back"
                                          d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
                                  ></path>
                                  <path class="bookmark-checkbox__icon-check" d="M8 11l3 3 5-5"></path>
                                </svg>
                              </label>
                            </div>
                            ì €ì¥
                        </span>
                    </div>
                </div>
            </div>
            <div class="right-div">
                <h2>ì½”ë“œë³´ê¸°</h2>
                <div style="background-color: black; height: 1px;"></div>
                <div id="codeType" style="text-align: center; padding: 15px;"></div>
                <div id="code"></div>
                <!-- ì—¬ê¸°ì— ì½”ë“œ ë³´ê¸° ìš”ì†Œ ì¶”ê°€ -->
            </div>
        </div>
    </div>
</section>

<!-- Open Comment Modal -->
<div class="modal fade" id="OpneCommentModal" tabindex="-1" aria-labelledby="OpneCommentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-vd">
            <div class="modal-header">
                <h4 class="modal-title text-center comment-text" id="OpneCommentModalLabel">ëŒ“ê¸€</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="commentsContainer">
                    <!-- ì—¬ê¸°ì— ëŒ“ê¸€ ëª©ë¡ì´ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    <ul id="commentList" class="list-group">
                        <!-- ëŒ“ê¸€ì´ ì¶”ê°€ë  ìë¦¬ -->
                    </ul>
                </div>
                <!-- ëŒ“ê¸€ ì“°ê¸° í¼ -->
                <form id="commentForm" class="mt-3" style="margin-top: auto;">
                    <div style="display: flex; width: 100%; height: 36px;">
                        <input type="text" name="text" class="input-comment" id="commentContents" placeholder="ëŒ“ê¸€ ë‹¬ê¸°..." style="flex: 1; margin-right: 5px;">
                        <button type="submit" class="input-comment btn-comment" style="font-size: 14px; font-weight: bold;">ëŒ“ê¸€ì¶”ê°€</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<th:block th:replace="~{body/footer :: footer}"></th:block>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<script src="/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/libs/swiper/swiper-bundle.min.js"></script>
<script src="/js/swiper.js"></script>
<script type="module" src="/js/app.js"></script>
<script>
    // Swiper ì´ˆê¸°í™”
    const swiper = new Swiper('.swiper-container', {
        effect: 'fade', // fade íš¨ê³¼ ì„¤ì •
        loop: true, // ë¬´í•œ ë°˜ë³µ ì„¤ì •
        autoplay: {
            delay: 3000, // ìë™ ì¬ìƒ ë”œë ˆì´ ì„¤ì • (3ì´ˆ)
            disableOnInteraction: false, // ìœ ì € ì¸í„°ë™ì…˜ í›„ì—ë„ ìë™ ì¬ìƒ ìœ ì§€
        },
        navigation: {
            nextEl: '.swiper-button-next', // ë‹¤ìŒ ë²„íŠ¼ í´ë˜ìŠ¤ ì§€ì •
            prevEl: '.swiper-button-prev', // ì´ì „ ë²„íŠ¼ í´ë˜ìŠ¤ ì§€ì •
        },
    });

    let commentList;
    let codeList;

    $(document).ready(function() {
        let projectVisible = false;

        $('#center-div').click(function () {
            if (!projectVisible) return;
            $('.right-div').removeClass('show-right-div');
            $('.center-div').removeClass('move-left'); // center-div ì›ë˜ ìœ„ì¹˜ë¡œ ë³µê·€
            projectVisible = false;
        });

        $('#right-div').click(function () {
            if (projectVisible) {
                $('.right-div').removeClass('show-right-div');
                $('.center-div').removeClass('move-left'); // center-div ì›ë˜ ìœ„ì¹˜ë¡œ ë³µê·€
            } else {
                $('.center-div').addClass('move-left');
                $('.right-div').addClass('show-right-div');
            }
            projectVisible = !projectVisible;
        });

        $.ajax({
            type:"post",
            url : "/codeCheck",
            data : {
                DDNum : `[[${view.BNum}]]`
            },
            dataType : "json",
            success : (list) =>{
                codeList = list;

                let output = '';
                for(let i=0; i<list.length; i++) {
                    output += `<a class="page dark gradient" data-page="${list[i].dtnum}"><button class="btn-cd">${list[i].dname} : Click!</button></a>`
                }
                $('#codeType').empty();
                $('#codeType').append(output);

                coding();
            },
            error : ()=>{
                alert('code ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨');
            }
        });
    });

    function coding() {
        $(document).on("click", "#codeType a", function (e) {
            for(let i=0; i<codeList.length; i++) {
                console.log($(this).data('page'));
                console.log(`${codeList[i].dtnum}`);
                if(`${codeList[i].dtnum}` === ``+$(this).data('page')) {
                    $('#code').empty();
                    $('#code').append(`<textarea cols="20" rows="25" class="code-content form-control" style="background-color: rgba(255,255,255,0.75); color: black; border: 0;">${codeList[i].dcode}</textarea>`);
                }
            }
        });
    }

    $('#commentView').click('click', function (e) {
        $.ajax({
            type : "post",
            url : "/commentList",
            data : {
                CBNum: '[[${view.BNum}]]'
            },
            dataType : "json",
            success : (list) => {
                commentList = list;
                commentUpdate(list);
            },
            error : ()=>{
                alert('ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨');
            }
        });
    });

    function commentUpdate(list) {
        let output = '<table class="table table-striped">';
        output += '<thead>';
        output += '<tr class="fs-6 ls-1 fw-bold">';
        // output += '<th>ëŒ“ê¸€ë²ˆí˜¸</th>';
        // output += '<th>ì‘ì„±ì</th>';
        // output += '<th style="text-align: center;">ë‚´ìš©</th>';
        // output += '<th>ì‘ì„±ë‚ ì§œ</th>';
        output += '</tr>';
        output += '</thead>';
        output += '<tbody>';


        for (let i=0; i < list.length; i++) {
            output += '<tr>';

            // ëŒ“ê¸€ ë²ˆí˜¸
            // output += `<td>${i+1}</td>`;

            // ëŒ“ê¸€ ì‘ì„±ì
            output += `<td><div style="display: flex; align-items: center;"><p style="font-size: 18px; font-weight: 300; margin: 0;">${list[i].cwriter}</p><span style="margin-right: 10px;"></span><p style="font-size: 12px; margin: 0;">${list[i].cdate}</p></div><p style="font-size: 18px; margin: 0;">${list[i].ccontents}</p></td>`;

            // ëŒ“ê¸€ ë‚´ìš©
            // output += `<td style="text-align: center;">${list[i].ccontents}</td>`;

            // ëŒ“ê¸€ ì‘ì„± ë‚ ì§œ
            // output += `<td>${list[i].cdate}</td>`;

            output += '</tr>';
        }

        output += '</tbody>';
        output += '</table>';

        console.log(output);
        $('#commentsContainer').empty();
        $('#commentsContainer').append(output);
    }


    $(document).ready(function() {
        // ëŒ“ê¸€ ì¶”ê°€ í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        $('#commentForm').submit(function(e) {
            e.preventDefault(); // í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ë§‰ê¸°

            // Ajaxë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
            $.ajax({
                url: '/commentWrite', // ëŒ“ê¸€ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•  ì„œë²„ URL
                type: 'POST',
                data: {                 // ì„œë²„ë¡œ ë³´ë‚¼ ë°ì´í„°
                    CWriter: '[[${session.loginId}]]',
                    CContents: $('#commentContents').val(),
                    CBNum: '[[${view.BNum}]]'
                },
                success: () => {
                    // ì„±ê³µì ìœ¼ë¡œ ëŒ“ê¸€ì„ ì¶”ê°€í•œ ê²½ìš°
                    alert('ëŒ“ê¸€ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    $('#commentModal').modal('hide'); // ëª¨ë‹¬ ë‹«ê¸°
                    // ì—¬ê¸°ì„œ ì¶”ê°€ì ìœ¼ë¡œ ëŒ“ê¸€ ëª©ë¡ì„ ê°±ì‹ í•˜ê±°ë‚˜ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                },
                error: () => {
                    // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì²˜ë¦¬
                    alert('ëŒ“ê¸€ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            });
        });
    });
</script>
</body>
</html>